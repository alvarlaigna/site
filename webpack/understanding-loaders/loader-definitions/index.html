<html lang="en"><head><title>Loader Definitions</title><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui"/><meta name="description" content="
Webpack provides multiple ways to set up module loaders. Webpack 2 simplified the situation by introducing a field known as use. The legacy options (loader and loaders) still work, though. I&#x27;ll discuss all the options for completeness, as you may see them in various configurations out there.

I recâ€¦"/><meta name="keywords" content="webpack,react,javascript,programming,web development"/><link rel="icon" type="image/png" href="/assets/img/favicon.png"/><link rel="alternate" type="application/atom+xml" href="/atom.xml"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"/><link rel="stylesheet" href="/assets/main.css"/></head><body><main role="main"><div class="chapter__wrapper"><div class="header-image" style="background-image:url(/assets/img/chapters/wrench.jpg);"></div><h1 class="post__heading">Loader Definitions</h1><div class="header-extra"><a href="https://pixabay.com/en/tools-technique-open-end-wrench-1093117/">jpj2000nl (Public Domain)</a></div><div class="toc-nav__wrapper"><h4 class="search-nav--header">Search</h4><input id="search"/><h4 class="toc-nav--header">Table of Contents</h4><ul class="toc-nav"><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/introduction">Introduction</a></li><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/webpack-compared">Webpack Compared</a></li><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/why-webpack">Why Webpack?</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/developing-with-webpack">Developing with Webpack</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing-with-webpack/getting-started">Getting Started</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing-with-webpack/automatic-browser-refresh">Automatic Browser Refresh</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing-with-webpack/configuring-hmr">Configuring Hot Module Replacement</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing-with-webpack/linting">Linting JavaScript</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing-with-webpack/composing-configuration">Composing Configuration</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/handling-styles">Handling Styles with Webpack</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/handling-styles/loading">Loading Styles</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/handling-styles/separating-css">Separating CSS</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/handling-styles/eliminating-unused-css">Eliminating Unused CSS</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/handling-styles/linting">Linting CSS</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/understanding-loaders">Understanding Loaders</a></li><li class="toc-chapter"><span class="toc-nav__link toc-nav__link--current chapter">Loader Definitions</span></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/understanding-loaders/loading-images">Loading Images</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/understanding-loaders/loading-fonts">Loading Fonts</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/building-with-webpack">Building with Webpack</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building-with-webpack/source-maps">Source Maps</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building-with-webpack/splitting-bundles">Splitting Bundles</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building-with-webpack/code-splitting">Code Splitting</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building-with-webpack/processing-with-babel">Processing with Babel</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building-with-webpack/cleaning-build">Cleaning the Build</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/optimizing-build">Optimizing the Build</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing-build/minifying">Minifying Build</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing-build/setting-environment-variables">Setting Environment Variables</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing-build/adding-hashes-to-filenames">Adding Hashes to Filenames</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing-build/separating-manifest">Separating a Manifest</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing-build/analyzing-build-statistics">Analyzing Build Statistics</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/advanced-techniques">Advanced Techniques</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/advanced-techniques/consuming-packages">Consuming Packages</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/advanced-techniques/authoring-packages">Authoring Packages</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/advanced-techniques/configuring-react">Configuring React</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/extending-webpack">Extending Webpack</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/extending-webpack/loaders">Extending Webpack with Loaders</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/extending-webpack/plugins">Extending Webpack with Plugins</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/appendices">Appendices</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/searching-with-react">Searching with React</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/writing-eslint-plugins">Writing ESLint Plugins</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/customizing-eslint">Customizing ESLint</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/deploying">Deploying Applications</a></li></ul><div><div class="buy-container"><a href="/webpack/introduction"><img class="sidebar-cover" src="/assets/img/webpack_title_page_small.png" width="255" height="329"/></a><p><a class="btn btn--normal btn--buy" href="https://leanpub.com/survivejs-webpack">Buy at Leanpub</a></p></div><h3>See also</h3><div class="buy-container"><a href="/react/introduction"><img class="sidebar-cover" src="/assets/img/react_title_page_small.png" width="255" height="329"/></a><p><a class="btn btn--normal btn--buy" href="https://leanpub.com/survivejs-react">Buy at Leanpub</a></p></div></div></div><div class="chapter"><div class="post__content"><blockquote class="latestpost tip"><div>From the blog:</div><a class="latestpost-link" href="/blog/survivejs-webpack-170">SurviveJS - Webpack - v1.7.0</a></blockquote><div class="chapter-content"><p>Webpack provides multiple ways to set up module loaders. Webpack 2 simplified the situation by introducing a field known as <code>use</code>. The legacy options (<code>loader</code> and <code>loaders</code>) still work, though. I&#39;ll discuss all the options for completeness, as you may see them in various configurations out there.</p>
<p>I recommend maintaining an <code>include</code> definition per each JavaScript-related loader definition. This will restrict its search path, improve performance, and make your configuration easier to follow. <code>include</code> accepts either a path or an array of paths. Another option would be to use <code>exclude</code>. Often you see declarations, like <code>exclude: /node_modules/</code>, for this reason.</p>
<p>It can be a good idea to prefer absolute paths here as they allow you to move configuration without breaking assumptions. The other option is to set <code>context</code> field as this gives a similar effect and affects the way entry points and loaders are resolved. It won&#39;t affect the output, though, and you still need to use an absolute path or <code>/</code> there.</p>
<p>Assuming you set a <code>include</code> or <code>exclude</code> rule, packages loaded from <em>node_modules</em> will still work as the assumption is that they have been compiled in such way that they work out of the box. Sometimes you may come upon a badly packaged one, but often you can work around these by tweaking your loader configuration or setting up a <code>resolve.alias</code> against an asset that is included with the offending package.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>The <em>Consuming Packages</em> chapter discusses the aliasing idea in further detail.</blockquote><h2 class="header"><a class="header-anchor" href="#anatomy-of-a-loader" id="anatomy-of-a-loader"></a><span class="text">Anatomy of a Loader</span><a class="header-anchor-select" href="#anatomy-of-a-loader">#</a></h2>
<p>Webpack supports a large variety of formats through <em>loaders</em>. In addition, it supports a couple of JavaScript module formats out of the box. Generally, the idea is the same. You always set up a loader, or loaders, and connect those with your directory structure.</p>
<p>Consider the example below where webpack is set to process JavaScript through Babel:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>

module<span class="token punctuation" >.</span>exports <span class="token operator" >=</span> <span class="token punctuation" >{</span>
  <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
  module<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
    rules<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
      <span class="token punctuation" >{</span>
        <span class="token comment" spellcheck="true">// Match files against RegExp. This accepts</span>
        <span class="token comment" spellcheck="true">// a function too.</span>
        test<span class="token punctuation" >:</span> <span class="token regex" >/\.js$/</span><span class="token punctuation" >,</span>

        <span class="token comment" spellcheck="true">// Restrict matching to a directory. This</span>
        <span class="token comment" spellcheck="true">// also accepts an array of paths.</span>
        <span class="token comment" spellcheck="true">//</span>
        <span class="token comment" spellcheck="true">// Although optional, I prefer to set this for</span>
        <span class="token comment" spellcheck="true">// JavaScript source as it helps with</span>
        <span class="token comment" spellcheck="true">// performance and keeps the configuration cleaner.</span>
        <span class="token comment" spellcheck="true">//</span>
        <span class="token comment" spellcheck="true">// This accepts an array or a function too. The</span>
        <span class="token comment" spellcheck="true">// same applies to `exclude` as well.</span>
        include<span class="token punctuation" >:</span> path<span class="token punctuation" >.</span><span class="token function" >join</span><span class="token punctuation" >(</span>__dirname<span class="token punctuation" >,</span> <span class="token string" >'app'</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>

        <span class="token comment" spellcheck="true">/*
        exclude(path) {
          // You can perform more complicated checks
          // through functions if you want.
          return path.match(/node_modules/);
        },
        */</span>

        <span class="token comment" spellcheck="true">// Apply loaders the matched files. These need to</span>
        <span class="token comment" spellcheck="true">// be installed separately. In this case our</span>
        <span class="token comment" spellcheck="true">// project would need *babel-loader*. This</span>
        <span class="token comment" spellcheck="true">// accepts an array of loaders as well and</span>
        <span class="token comment" spellcheck="true">// more forms are possible as discussed below.</span>
        use<span class="token punctuation" >:</span> <span class="token string" >'babel-loader'</span><span class="token punctuation" >,</span>
      <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
    <span class="token punctuation" >]</span><span class="token punctuation" >,</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
<span class="token punctuation" >}</span><span class="token punctuation" >;</span>
</code></pre>
<blockquote class="tip"><i class="icon-attention-circled"></i>If you are not sure how a particular RegExp matches, consider using an online tool, such as <a href="https://regex101.com/">regex101</a> or <a href="http://regexr.com/">RegExr</a>.</blockquote><blockquote class="tip"><i class="icon-attention-circled"></i>Babel is discussed in greater detail in the <em>Processing with Babel</em> chapter. We&#39;ll attach it to the book project there.</blockquote><h2 class="header"><a class="header-anchor" href="#loader-evaluation-order" id="loader-evaluation-order"></a><span class="text">Loader Evaluation Order</span><a class="header-anchor-select" href="#loader-evaluation-order">#</a></h2>
<p>It is good to keep in mind that webpack&#39;s <code>loaders</code> are always evaluated from right to left and from bottom to top (separate definitions). The right-to-left rule is easier to remember when you think about it in terms of functions. You can read definition <code>use: [&#39;style-loader&#39;, &#39;css-loader&#39;]</code> as <code>style(css(input))</code> based on this rule.</p>
<p>To see the rule in action, consider the example below:</p>
<pre><code class="lang-javascript"><span class="token punctuation" >{</span>
  test<span class="token punctuation" >:</span> <span class="token regex" >/\.css$/</span><span class="token punctuation" >,</span>
  use<span class="token punctuation" >:</span> <span class="token punctuation" >[</span><span class="token string" >'style-loader'</span><span class="token punctuation" >,</span> <span class="token string" >'css-loader'</span><span class="token punctuation" >]</span><span class="token punctuation" >,</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>Based on the right to left rule, the example can be split up while keeping it equivalent:</p>
<pre><code class="lang-javascript"><span class="token punctuation" >{</span>
  test<span class="token punctuation" >:</span> <span class="token regex" >/\.css$/</span><span class="token punctuation" >,</span>
  use<span class="token punctuation" >:</span> <span class="token punctuation" >[</span><span class="token string" >'style-loader'</span><span class="token punctuation" >]</span><span class="token punctuation" >,</span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span>
<span class="token punctuation" >{</span>
  test<span class="token punctuation" >:</span> <span class="token regex" >/\.css$/</span><span class="token punctuation" >,</span>
  use<span class="token punctuation" >:</span> <span class="token punctuation" >[</span><span class="token string" >'css-loader'</span><span class="token punctuation" >]</span><span class="token punctuation" >,</span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span>
</code></pre>
<h3 class="header"><a class="header-anchor" href="#enforcing-order" id="enforcing-order"></a><span class="text">Enforcing Order</span><a class="header-anchor-select" href="#enforcing-order">#</a></h3>
<p>Even though it would be possible to develop an arbitrary configuration using the rule above, it can be convenient to be able to force certain rules to be applied before or after regular ones. This is where a field known as <code>enforce</code> can come in handy. It can be set to either <code>pre</code> or <code>post</code> to push processing either before or after other loaders.</p>
<p>We used the idea earlier in the <em>Linting JavaScript</em> chapter. Linting is a good example as the build should fail before it does anything else. Using <code>enforce: &#39;post&#39;</code> is rarer and it would imply you want to perform a check against the built source. Performing analysis against the built source is one potential example.</p>
<p>To borrow the linting example, the basic syntax goes like this:</p>
<pre><code class="lang-javascript"><span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">// Conditions</span>
  test<span class="token punctuation" >:</span> <span class="token regex" >/\.js$/</span><span class="token punctuation" >,</span>
  enforce<span class="token punctuation" >:</span> <span class="token string" >'pre'</span><span class="token punctuation" >,</span>

  <span class="token comment" spellcheck="true">// Actions</span>
  loader<span class="token punctuation" >:</span> <span class="token string" >'eslint-loader'</span><span class="token punctuation" >,</span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span>
</code></pre>
<p>It would be possible to write the same configuration without <code>enforce</code> if you chained the declaration with other loaders related to the <code>test</code> carefully. Using <code>enforce</code> removes the necessity for that allows you to split loader execution into separate stages that are easier to compose.</p>
<h2 class="header"><a class="header-anchor" href="#passing-parameters-to-a-loader" id="passing-parameters-to-a-loader"></a><span class="text">Passing Parameters to a Loader</span><a class="header-anchor-select" href="#passing-parameters-to-a-loader">#</a></h2>
<p>There&#39;s a query format that allows passing parameters to loaders:</p>
<pre><code class="lang-javascript"><span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">// Conditions</span>
  test<span class="token punctuation" >:</span> <span class="token regex" >/\.js$/</span><span class="token punctuation" >,</span>
  include<span class="token punctuation" >:</span> PATHS<span class="token punctuation" >.</span>app<span class="token punctuation" >,</span>

  <span class="token comment" spellcheck="true">// Actions</span>
  use<span class="token punctuation" >:</span> <span class="token string" >'babel-loader?cacheDirectory,presets[]=react,presets[]=es2015'</span><span class="token punctuation" >,</span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span>
</code></pre>
<p>It is good to note that this style of configuration works in entries and source imports too as webpack will pick it up. There are special cases where the format may come in handy, but often you are better off using more readable alternatives.</p>
<p>It is preferable to use the combination of <code>loader</code> and <code>options</code> fields either like this:</p>
<pre><code class="lang-javascript"><span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">// Conditions</span>
  test<span class="token punctuation" >:</span> <span class="token regex" >/\.js$/</span><span class="token punctuation" >,</span>
  include<span class="token punctuation" >:</span> PATHS<span class="token punctuation" >.</span>app<span class="token punctuation" >,</span>

  <span class="token comment" spellcheck="true">// Actions</span>
  loader<span class="token punctuation" >:</span> <span class="token string" >'babel-loader'</span><span class="token punctuation" >,</span>
  options<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
    cacheDirectory<span class="token punctuation" >:</span> <span class="token boolean" >true</span><span class="token punctuation" >,</span>
    presets<span class="token punctuation" >:</span> <span class="token punctuation" >[</span><span class="token string" >'react'</span><span class="token punctuation" >,</span> <span class="token string" >'es2015'</span><span class="token punctuation" >]</span><span class="token punctuation" >,</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span>
</code></pre>
<p>Or you can also go through <code>use</code> like this:</p>
<pre><code class="lang-javascript"><span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">// Conditions</span>
  test<span class="token punctuation" >:</span> <span class="token regex" >/\.js$/</span><span class="token punctuation" >,</span>
  include<span class="token punctuation" >:</span> PATHS<span class="token punctuation" >.</span>app<span class="token punctuation" >,</span>

  <span class="token comment" spellcheck="true">// Actions</span>
  use<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
    loader<span class="token punctuation" >:</span> <span class="token string" >'babel-loader'</span><span class="token punctuation" >,</span>
    options<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
      cacheDirectory<span class="token punctuation" >:</span> <span class="token boolean" >true</span><span class="token punctuation" >,</span>
      presets<span class="token punctuation" >:</span> <span class="token punctuation" >[</span><span class="token string" >'react'</span><span class="token punctuation" >,</span> <span class="token string" >'es2015'</span><span class="token punctuation" >]</span><span class="token punctuation" >,</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span>
</code></pre>
<p>If we wanted to use more than one loader, we could pass an array to <code>use</code> and expand from there:</p>
<pre><code class="lang-javascript"><span class="token punctuation" >{</span>
  test<span class="token punctuation" >:</span> <span class="token regex" >/\.js$/</span><span class="token punctuation" >,</span>
  include<span class="token punctuation" >:</span> PATHS<span class="token punctuation" >.</span>app<span class="token punctuation" >,</span>

  use<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
    <span class="token punctuation" >{</span>
      loader<span class="token punctuation" >:</span> <span class="token string" >'babel-loader'</span><span class="token punctuation" >,</span>
      options<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
        cacheDirectory<span class="token punctuation" >:</span> <span class="token boolean" >true</span><span class="token punctuation" >,</span>
        presets<span class="token punctuation" >:</span> <span class="token punctuation" >[</span><span class="token string" >'react'</span><span class="token punctuation" >,</span> <span class="token string" >'es2015'</span><span class="token punctuation" >]</span><span class="token punctuation" >,</span>
      <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
    <span class="token comment" spellcheck="true">// Add more loaders here</span>
  <span class="token punctuation" >]</span><span class="token punctuation" >,</span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span>
</code></pre>
<h2 class="header"><a class="header-anchor" href="#branching-at-use-using-a-function" id="branching-at-use-using-a-function"></a><span class="text">Branching at <code>use</code> Using a Function</span><a class="header-anchor-select" href="#branching-at-use-using-a-function">#</a></h2>
<p>In the book setup we compose configuration on a higher level. Another option to achieve similar results would be to branch at <code>use</code> as webpack&#39;s loader definitions accept functions that allow you to branch depending on environment. Consider the example below:</p>
<pre><code class="lang-javascript"><span class="token punctuation" >{</span>
  test<span class="token punctuation" >:</span> <span class="token regex" >/\.css$/</span><span class="token punctuation" >,</span>

  <span class="token comment" spellcheck="true">// resource refers to the resource path matched.</span>
  <span class="token comment" spellcheck="true">// resourceQuery contains possible query passed to it (?sourceMap)</span>
  <span class="token comment" spellcheck="true">// issuer tells about match context path</span>
  use<span class="token punctuation" >:</span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span> resource<span class="token punctuation" >,</span> resourceQuery<span class="token punctuation" >,</span> issuer <span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    <span class="token comment" spellcheck="true">// You have to return either something falsy,</span>
    <span class="token comment" spellcheck="true">// string (i.e., 'style-loader'), or an object</span>
    <span class="token comment" spellcheck="true">// from here.</span>
    <span class="token comment" spellcheck="true">//</span>
    <span class="token comment" spellcheck="true">// Returning an array will fail! To get around that,</span>
    <span class="token comment" spellcheck="true">// it is possible to nest rules.</span>
    <span class="token keyword" >if</span> <span class="token punctuation" >(</span>env <span class="token operator" >===</span> <span class="token string" >'development'</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
      <span class="token keyword" >return</span> <span class="token punctuation" >{</span>
        <span class="token comment" spellcheck="true">// Trigger css-loader first</span>
        loader<span class="token punctuation" >:</span> <span class="token string" >'css-loader'</span><span class="token punctuation" >,</span>
        rules<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
          <span class="token comment" spellcheck="true">// And style-loader after it</span>
          <span class="token string" >'style-loader'</span><span class="token punctuation" >,</span>
        <span class="token punctuation" >]</span><span class="token punctuation" >,</span>
      <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
    <span class="token punctuation" >}</span>

    <span class="token comment" spellcheck="true">// Do something else in production environment now</span>
    <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span>
</code></pre>
<p>Carefully applied, this technique can be useful and allow different ways of composition.</p>
<h2 class="header"><a class="header-anchor" href="#inline-definitions" id="inline-definitions"></a><span class="text">Inline Definitions</span><a class="header-anchor-select" href="#inline-definitions">#</a></h2>
<p>Even though configuration level loader definitions are preferable, it is possible to write loader definitions inline like this:</p>
<pre><code class="lang-javascript"><span class="token comment" spellcheck="true">// Process foo.png through url-loader and other</span>
<span class="token comment" spellcheck="true">// possible matches.</span>
<span class="token keyword" >import</span> <span class="token string" >'url-loader!./foo.png'</span><span class="token punctuation" >;</span>

<span class="token comment" spellcheck="true">// Override possible higher level match completely</span>
<span class="token keyword" >import</span> <span class="token string" >'!!url-loader!./bar.png'</span><span class="token punctuation" >;</span>
</code></pre>
<p>The problem with this approach is that it couples your source with webpack. But it is a good form to know still. Given configuration entries go through the same mechanism, the forms work there as well:</p>
<pre><code class="lang-javascript"><span class="token punctuation" >{</span>
  entry<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
    app<span class="token punctuation" >:</span> <span class="token string" >'babel-loader!./app'</span><span class="token punctuation" >,</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span>
</code></pre>
<h2 class="header"><a class="header-anchor" href="#alternative-ways-to-match-files" id="alternative-ways-to-match-files"></a><span class="text">Alternative Ways to Match Files</span><a class="header-anchor-select" href="#alternative-ways-to-match-files">#</a></h2>
<p><code>test</code> combined with <code>include</code> or <code>exclude</code> to constrain the match is the most common way to match files. These accept the data types as listed below:</p>
<ul>
<li><code>test</code> - Match against a RegExp, string, function, an object, or an array of conditions like these.</li>
<li><code>include</code> - The same.</li>
<li><code>exclude</code> - The same, except the output is inverse of <code>include</code>.</li>
</ul>
<p>There are a couple of boolean based fields that can be used to constrain the result further:</p>
<ul>
<li><code>not</code> - Do <strong>not</strong> match against a condition like above.</li>
<li><code>and</code> - Match against an array of conditions. All must match.</li>
<li><code>or</code> - Match against an array while any must match.</li>
</ul>
<p>Webpack can also match based on the resource path and related information:</p>
<ul>
<li><code>resource: /inline/</code> - Match against a resource path including the query. Example matches: <code>/path/foo.inline.js</code>, <code>/path/bar.png?inline</code>.</li>
<li><code>issuer: /bar.js/</code> - Match against a resource requested from the match. Example: <code>/path/foo.png</code> would match if it was requested from <code>/path/bar.js</code>.</li>
<li><code>resourcePath: /inline/</code> - Match against a resource path without its query. Example match: <code>/path/foo.inline.png</code>.</li>
<li><code>resourceQuery: /inline/</code> - Match against a resource based on its query. Example match: <code>/path/foo.png?inline</code>.</li>
</ul>
<p>The fields above can be combined to apply different loaders based on the context with the <code>oneOf</code> field. To handle images differently based on their query, we could apply a rule like this:</p>
<pre><code class="lang-javascript"><span class="token punctuation" >{</span>
  test<span class="token punctuation" >:</span> <span class="token regex" >/\.css$/</span><span class="token punctuation" >,</span>
  oneOf<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
    <span class="token punctuation" >{</span>
      resourceQuery<span class="token punctuation" >:</span> <span class="token regex" >/inline/</span><span class="token punctuation" >,</span>
      use<span class="token punctuation" >:</span> <span class="token string" >'url-loader'</span><span class="token punctuation" >,</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
    <span class="token punctuation" >{</span>
      resourceQuery<span class="token punctuation" >:</span> <span class="token regex" >/external/</span><span class="token punctuation" >,</span>
      use<span class="token punctuation" >:</span> <span class="token string" >'file-loader'</span><span class="token punctuation" >,</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  <span class="token punctuation" >]</span><span class="token punctuation" >,</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>The rule could use <code>resourcePath</code> over <code>resourceQuery</code> if you wanted to embed the context information to the filename itself.</p>
<h2 class="header"><a class="header-anchor" href="#-loaderoptionsplugin-" id="-loaderoptionsplugin-"></a><span class="text"><code>LoaderOptionsPlugin</code></span><a class="header-anchor-select" href="#-loaderoptionsplugin-">#</a></h2>
<p>Given webpack 2 forbids arbitrary root level configuration, you have to use <code>LoaderOptionsPlugin</code> to manage it. The plugin exists for legacy compatibility and may disappear in a future release. Consider the example below:</p>
<pre><code class="lang-javascript"><span class="token punctuation" >{</span>
  plugins<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
    <span class="token keyword" >new</span> <span class="token class-name" >webpack<span class="token punctuation" >.</span>LoaderOptionsPlugin</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
      sassLoader<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
        includePaths<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
          path<span class="token punctuation" >.</span><span class="token function" >join</span><span class="token punctuation" >(</span>__dirname<span class="token punctuation" >,</span> <span class="token string" >'style'</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
        <span class="token punctuation" >]</span><span class="token punctuation" >,</span>
      <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
  <span class="token punctuation" >]</span><span class="token punctuation" >,</span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span>
</code></pre>
<h2 class="header"><a class="header-anchor" href="#conclusion" id="conclusion"></a><span class="text">Conclusion</span><a class="header-anchor-select" href="#conclusion">#</a></h2>
<p>Webpack provides multiple ways to set up loaders, but sticking with <code>use</code> is enough in webpack 2. You should be careful, especially with loader ordering, as this is a common source of problems. I will discuss specific assets types and how to load them using webpack next.</p>
</div><div class="social-links"><blockquote class="tip">If you enjoyed this chapter, consider subscribing to the mailing list below or following <a href="https://twitter.com/survivejs">@survivejs</a> for occasional updates. There is also <a href="/atom.xml">RSS</a> available for old beards (no pun intended).</blockquote><h2 class="subscribe-header">Subscribe to the mailing list</h2><form action="//jster.us7.list-manage.com/subscribe/post?u=ed40c0084a0c5ba31b3365d65&amp;id=b853b8e786" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate social-form" target="_blank" novalidate=""><div id="mc_embed_signup_scroll"><div class="mc-field-group social-input-container"><input type="email" placeholder="Email" value="" name="EMAIL" class="required email" id="mce-EMAIL"/></div><div style="display:none;position:absolute;left:-5000px;"><input type="text" name="b_ed40c0084a0c5ba31b3365d65_b853b8e786" tabindex="-1" value=""/></div><div class="social-subscribe-container"><input type="submit" class="btn button social-subscribe" style="margin-top:1em;margin-bottom:1em;line-height:2em;" value="Subscribe" name="subscribe" id="mc-embedded-subscribe"/></div></div></form></div><div class="new-prevnext"><div class="new-prevnext__prev"><div class="new-prevnext__bg" style="background-image:url(/assets/img/chapters/photos.jpg);"></div><span class="new-prevnext__info">Previous chapter</span><a class="new-prevnext__link" href="/webpack/understanding-loaders">Understanding Loaders</a></div><div class="new-prevnext__next"><div class="new-prevnext__bg" style="background-image:url(/assets/img/chapters/old_camera.jpg);"></div><span class="new-prevnext__info">Next chapter</span><a class="new-prevnext__link" href="/webpack/understanding-loaders/loading-images">Loading Images</a></div></div><blockquote class="tip"><p>This book is <a href="https://leanpub.com/survivejs-webpack">available through Leanpub</a>. By purchasing the book you support the development of further content. A part of profit (~30%) goes to Tobias Koppers, the author of Webpack.</p></blockquote><div id="disqus_thread"></div></div></div><div><a class="next-page" title="Loading Images" href="/webpack/understanding-loaders/loading-images"><i class="icon-right-open"></i></a><a class="previous-page" title="Understanding Loaders" href="/webpack/understanding-loaders"><i class="icon-left-open"></i></a></div><script type="text/javascript">var disqus_shortname = 'survivejs';(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script></div><div class="nav__wrapper"><input type="checkbox" class="nav__toggle" id="nav__toggle"/><label class="nav__toggle-label" for="nav__toggle"></label><nav class="nav"><div class="nav__link"><a class="" href="/">Home</a></div><div class="nav__link"><a class="" href="/blog">Read the blog</a></div><div class="nav__link"><a class="" href="https://leanpub.com/survivejs-webpack">Buy the ebook</a></div><div class="nav__link"><a class="" href=""></a></div><div class="nav__link"><a class="" href="https://twitter.com/survivejs">@survivejs</a></div></nav></div><a href="https://github.com/survivejs/webpack" class="github-corner"><svg width="80" height="80" viewBox="0 0 250 250" style="position:absolute;top:0;fill:#000;right:0;"><path class="octo-banner" d="M0 0l115 115h15l12 27 108 108V0z" fill="#fff"></path><path class="octo-arm" d="M128 109c-15-9-9-19-9-19 3-7 2-11 2-11-1-7 3-2 3-2 4 5 2 11 2 11-3 10 5 15 9 16" style="-webkit-transform-origin:130px 106px;transform-origin:130px 106px;"></path><path class="octo-body" d="M115 115s4 2 5 0l14-14c3-2 6-3 8-3-8-11-15-24 2-41 5-5 10-7 16-7 1-2 3-7 12-11 0 0 5 3 7 16 4 2 8 5 12 9s7 8 9 12c14 3 17 7 17 7-4 8-9 11-11 11 0 6-2 11-7 16-16 16-30 10-41 2 0 3-1 7-5 11l-12 11c-1 1 1 5 1 5z"></path></svg></a><footer><div class="footer-wrapper"><div class="footer-content-wrapper"><div class="footer-social"><h3>Social</h3><ul><li><a href="https://twitter.com/survivejs" target="_blank">@survivejs</a></li><li><a href="http://eepurl.com/bth1v5" target="_blank">Mailing List</a></li><li><a href="https://gitter.im/survivejs" target="_blank">Gitter Chat</a></li><li><a href="https://github.com/survivejs" target="_blank">GitHub</a></li><li><a href="/atom.xml" target="_blank">Blog RSS</a></li><li><a href="http://goo.gl/forms/OWdGIOdHm9" target="_blank">Contact</a></li><li><a href="https://github.com/survivejs/ama/issues" target="_blank">Ask Me Anything</a></li></ul></div><div class="footer-blog"><h3>From the Blog</h3><ul class="blog-teasers"><li><a class="blog-teaser" href="/blog/survivejs-webpack-170">SurviveJS - Webpack - v1.7.0</a></li><li><a class="blog-teaser" href="/blog/unexpected-interview">Unexpected - The Extensible BDD Assertion Toolkit - Interview with Sune Simonsen</a></li><li><a class="blog-teaser" href="/blog/ajv-interview">ajv - The Fastest JSON Schema Validator - Interview with Evgeny Poberezkin</a></li><li><a class="blog-teaser" href="/blog/survivejs-webpack-160">SurviveJS - Webpack - v1.6.0</a></li><li><a class="blog-teaser" href="/blog/isomorphic-webpack-interview">isomorphic-webpack - Universal module consumption using webpack - Interview with Gajus Kuizinas</a></li><li><a class="blog-teaser" href="/blog/survivejs-webpack-150">SurviveJS - Webpack - v1.5.0</a></li><li><a class="blog-teaser" href="/blog/styletron-interview">Styletron - Universal, high-performance JavaScript styles - Interview with Ryan Tsao</a></li><li><a class="blog-teaser" href="/blog/survivejs-webpack-142">SurviveJS - Webpack - v1.4.2</a></li><li><a class="blog-teaser" href="/blog/inferno-interview">Inferno - Blazing fast, React-like UI library - Interview with Dominic Gannaway</a></li><li><a class="blog-teaser" href="/blog/svelte-interview">Svelte - The magical disappearing UI framework - Interview with Rich Harris</a></li></ul></div></div></div></footer><div><div class="gitter-open-chat-button">Need help?</div><script type="text/javascript">
            ((window.gitter = {}).chat = {}).options = {
              showChatByDefault: false,
              activationElement: '.gitter-open-chat-button',
              room: 'survivejs/webpack'
            };
          </script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="" defer=""></script></div><div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript">
            docsearch({
              apiKey: '1182e3806d62e921613b8dc9c7a22ef3',
              indexName: 'survivejs_webpack',
              inputSelector: '#search',
              debug: false
            });
          </script></div></main></body></html>