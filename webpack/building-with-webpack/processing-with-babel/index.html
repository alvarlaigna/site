<html lang="en"><head><title>SurviveJS - Processing with Babel</title><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui"/><meta name="description" content="
Webpack processes ES6 module definitions by default and transforms them into code that looks roughly like this:

build/app.js

`javascript
webpackJsonp([1],{

/***/ 19:
/***/ function(module, exports, webpack_require) {

&quot;use strict&quot;;
/* harmony default export */ exports[&quot;a&quot;] = function () {
  consâ€¦"/><meta name="keywords" content="webpack,react,javascript,programming,web development"/><link rel="icon" type="image/png" href="/assets/img/favicon.png"/><link rel="alternate" type="application/atom+xml" href="/atom.xml"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"/><link rel="stylesheet" href="/assets/main.css"/></head><body><main role="main"><div class="chapter__wrapper"><div class="header-image" style="background-image:url(/assets/img/chapters/babel.jpg);"></div><h1 class="post__heading">Processing with Babel</h1><div class="header-extra"><a href="https://pixabay.com/en/tower-factory-headframe-threatening-1897536/">Tama66 (Public Domain)</a></div><div class="toc-nav__wrapper"><h4 class="search-nav--header">Search</h4><input id="search"/><h4 class="toc-nav--header">Table of Contents</h4><ul class="toc-nav"><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/introduction">Introduction</a></li><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/webpack-compared">Webpack Compared</a></li><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/why-webpack">Why Webpack?</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/developing-with-webpack">Developing with Webpack</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing-with-webpack/getting-started">Getting Started</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing-with-webpack/automatic-browser-refresh">Automatic Browser Refresh</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing-with-webpack/configuring-hmr">Configuring Hot Module Replacement</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing-with-webpack/linting">Linting JavaScript</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing-with-webpack/splitting-configuration">Splitting the Configuration</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/handling-styles">Handling Styles with Webpack</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/handling-styles/loading">Loading Styles</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/handling-styles/separating-css">Separating CSS</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/handling-styles/eliminating-unused-css">Eliminating Unused CSS</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/handling-styles/linting">Linting CSS</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/understanding-loaders">Understanding Loaders</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/understanding-loaders/loader-definitions">Loader Definitions</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/understanding-loaders/loading-images">Loading Images</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/understanding-loaders/loading-fonts">Loading Fonts</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/understanding-loaders/writing-loaders">Writing Loaders</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/building-with-webpack">Building with Webpack</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building-with-webpack/enabling-sourcemaps">Enabling Sourcemaps</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building-with-webpack/splitting-bundles">Splitting Bundles</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building-with-webpack/code-splitting">Code Splitting</a></li><li class="toc-chapter"><span class="toc-nav__link toc-nav__link--current chapter">Processing with Babel</span></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building-with-webpack/cleaning-build">Cleaning the Build</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building-with-webpack/hosting-on-github-pages">Hosting on GitHub Pages</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/optimizing-build">Optimizing the Build</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing-build/minifying">Minifying the Build</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing-build/setting-environment-variables">Setting Environment Variables</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing-build/adding-hashes-to-filenames">Adding Hashes to Filenames</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing-build/analyzing-build-statistics">Analyzing Build Statistics</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/advanced-techniques">Advanced Techniques</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/advanced-techniques/consuming-packages">Consuming Packages</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/advanced-techniques/authoring-packages">Authoring Packages</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/advanced-techniques/configuring-react">Configuring React</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/appendices">Appendices</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/searching-with-react">Searching with React</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/configuring-hmr-with-react">Configuring Hot Module Replacement with React</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/writing-eslint-plugins">Writing ESLint Plugins</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/customizing-eslint">Customizing ESLint</a></li></ul><div><div class="buy-container"><a href="/webpack/introduction"><img class="sidebar-cover" src="/assets/img/webpack_title_page_small.png" width="255" height="329"/></a><p><a class="btn btn--normal btn--buy" href="https://leanpub.com/survivejs-webpack">Buy at Leanpub</a></p></div><h3>See also</h3><div class="buy-container"><a href="/react/introduction"><img class="sidebar-cover" src="/assets/img/react_title_page_small.png" width="255" height="329"/></a><p><a class="btn btn--normal btn--buy" href="https://leanpub.com/survivejs-react">Buy at Leanpub</a></p></div></div></div><div class="chapter"><div class="post__content"><blockquote class="latestpost tip"><div>From the blog:</div><a class="latestpost-link" href="/blog/survivejs-webpack-160">SurviveJS - Webpack - v1.6.0</a></blockquote><div class="chapter-content"><p>Webpack processes ES6 module definitions by default and transforms them into code that looks roughly like this:</p>
<p><strong>build/app.js</strong></p>
<pre><code class="lang-javascript"><span class="token function" >webpackJsonp</span><span class="token punctuation" >(</span><span class="token punctuation" >[</span><span class="token number" >1</span><span class="token punctuation" >]</span><span class="token punctuation" >,</span><span class="token punctuation" >{</span>

<span class="token comment" spellcheck="true">/***/</span> <span class="token number" >19</span><span class="token punctuation" >:</span>
<span class="token comment" spellcheck="true">/***/</span> <span class="token keyword" >function</span><span class="token punctuation" >(</span>module<span class="token punctuation" >,</span> exports<span class="token punctuation" >,</span> __webpack_require__<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>

<span class="token string" >"use strict"</span><span class="token punctuation" >;</span>
<span class="token comment" spellcheck="true">/* harmony default export */</span> exports<span class="token punctuation" >[</span><span class="token string" >"a"</span><span class="token punctuation" >]</span> <span class="token operator" >=</span> <span class="token keyword" >function</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token keyword" >const</span> element <span class="token operator" >=</span> document<span class="token punctuation" >.</span><span class="token function" >createElement</span><span class="token punctuation" >(</span><span class="token string" >'h1'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

  element<span class="token punctuation" >.</span>className <span class="token operator" >=</span> <span class="token string" >'pure-button'</span><span class="token punctuation" >;</span>
  element<span class="token punctuation" >.</span>innerHTML <span class="token operator" >=</span> <span class="token string" >'Hello world'</span><span class="token punctuation" >;</span>
  element<span class="token punctuation" >.</span>onclick <span class="token operator" >=</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    __webpack_require__<span class="token punctuation" >.</span>e<span class="token comment" spellcheck="true">/* import() */</span><span class="token punctuation" >(</span><span class="token number" >0</span><span class="token punctuation" >)</span><span class="token punctuation" >.</span><span class="token function" >then</span><span class="token punctuation" >(</span>__webpack_require__<span class="token punctuation" >.</span><span class="token function" >bind</span><span class="token punctuation" >(</span><span class="token keyword" >null</span><span class="token punctuation" >,</span> <span class="token number" >36</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span><span class="token punctuation" >.</span><span class="token function" >then</span><span class="token punctuation" >(</span><span class="token punctuation" >(</span>lazy<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
      element<span class="token punctuation" >.</span>textContent <span class="token operator" >=</span> lazy<span class="token punctuation" >.</span><span class="token keyword" >default</span><span class="token punctuation" >;</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >.</span><span class="token keyword" >catch</span><span class="token punctuation" >(</span><span class="token punctuation" >(</span>err<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
      console<span class="token punctuation" >.</span><span class="token function" >error</span><span class="token punctuation" >(</span>err<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>

  <span class="token keyword" >return</span> element<span class="token punctuation" >;</span>
<span class="token punctuation" >}</span><span class="token punctuation" >;</span>

<span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
</code></pre>
<p>It is important to note that it does <strong>not</strong> transform ES6 specific syntax, such as <code>(lazy) =&gt; {</code> in the example, to ES5. This can be a problem especially on older browsers. It is also problematic if you minify your code through UglifyJS as it doesn&#39;t support ES6 syntax yet and will raise an error when it encounters the syntax it doesn&#39;t understand.</p>
<p>One way to work around this problem is to process the code through <a href="https://babeljs.io/">Babel</a>, a popular JavaScript compiler that supports ES6 features and more. It resembles ESLint in that it is built on top of presets and plugins. Presets are collections of plugins and you can define your own as well.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>Given sometimes extending existing presets might not be enough, <a href="https://www.npmjs.com/package/modify-babel-preset">modify-babel-preset</a> allows you to go a step further and configure the base preset in a more flexible way.</blockquote><h2 class="header"><a class="header-anchor" href="#using-babel-with-webpack" id="using-babel-with-webpack"></a><span class="text">Using Babel with Webpack</span><a class="header-anchor-select" href="#using-babel-with-webpack">#</a></h2>
<p>Even though Babel can be used standalone, as you can see in the <em>Authoring Packages</em> chapter, you can hook it up with webpack as well. During development, we actually might skip processing.</p>
<p>This is a good option especially if you don&#39;t rely on any custom language features and work using a modern browser. Processing through Babel becomes almost a necessity when you compile your code for production, though.</p>
<p>You can use Babel with webpack through <a href="https://www.npmjs.com/package/babel-loader">babel-loader</a>. It can pick up project level Babel configuration or you can configure it at the loader itself.</p>
<p>Connecting Babel with a project allows you to process webpack configuration through it. To achieve this, name your webpack configuration using the <em>webpack.config.babel.js</em> convention. This works because of the <a href="https://www.npmjs.com/package/interpret">interpret</a> package and supports other compilers as well.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>Given that <a href="http://node.green/">Node.js supports the ES6 specification well</a> these days, you can use a lot of ES6 features without having to process configuration through Babel.</blockquote><blockquote class="tip"><i class="icon-attention-circled"></i>Babel isn&#39;t the only option although it is the most popular one. <a href="https://buble.surge.sh">BublÃ©</a> by Rich Harris is another commpiler worth checking out. There&#39;s experimental <a href="https://www.npmjs.com/package/buble-loader">buble-loader</a> that allows you to use it with webpack. BublÃ© doesn&#39;t support ES6 modules, but that&#39;s not a problem as webpack provides that functionality.</blockquote><h3 class="header"><a class="header-anchor" href="#setting-up-babel-loader-" id="setting-up-babel-loader-"></a><span class="text">Setting Up <em>babel-loader</em></span><a class="header-anchor-select" href="#setting-up-babel-loader-">#</a></h3>
<p>The first step towards configuring Babel to work with webpack is to set up <a href="https://www.npmjs.com/package/babel-loader">babel-loader</a>. It will take our code and turn it into a format older browsers can understand. Install <em>babel-loader</em> and include its peer dependency <em>babel-core</em>:</p>
<pre><code class="lang-bash">npm i babel-loader babel-core --save-dev
</code></pre>
<p>As usual, let&#39;s define a part for Babel:</p>
<p>Here&#39;s the full loader configuration:</p>
<p><strong>webpack.parts.js</strong></p>
<pre><code class="lang-javascript"><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>

exports<span class="token punctuation" >.</span>loadJavaScript <span class="token operator" >=</span> <span class="token keyword" >function</span><span class="token punctuation" >(</span>paths<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token keyword" >return</span> <span class="token punctuation" >{</span>
    module<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
      rules<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
        <span class="token punctuation" >{</span>
          test<span class="token punctuation" >:</span> <span class="token regex" >/\.js$/</span><span class="token punctuation" >,</span>
          include<span class="token punctuation" >:</span> paths<span class="token punctuation" >,</span>

          loader<span class="token punctuation" >:</span> <span class="token string" >'babel-loader'</span><span class="token punctuation" >,</span>
          options<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
            <span class="token comment" spellcheck="true">// Enable caching for improved performance during</span>
            <span class="token comment" spellcheck="true">// development.</span>
            <span class="token comment" spellcheck="true">// It uses default OS directory by default. If you need</span>
            <span class="token comment" spellcheck="true">// something more custom, pass a path to it.</span>
            <span class="token comment" spellcheck="true">// I.e., { cacheDirectory: '&lt;path>' }</span>
            cacheDirectory<span class="token punctuation" >:</span> <span class="token boolean" >true</span><span class="token punctuation" >,</span>
          <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
        <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
      <span class="token punctuation" >]</span><span class="token punctuation" >,</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span><span class="token punctuation" >;</span>
</code></pre>
<p>Next, we need to connect this with the main configuration. I&#39;ll process the code through Babel only during production although it would be possible to do it both for development and production usage.</p>
<p>In addition, I&#39;ll constrain webpack to process only our application code through Babel as I don&#39;t want it to process files from <em>node_modules</em> for example. This helps with performance and it is a good practice with JavaScript files.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>

module<span class="token punctuation" >.</span>exports <span class="token operator" >=</span> <span class="token keyword" >function</span><span class="token punctuation" >(</span>env<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token keyword" >if</span> <span class="token punctuation" >(</span>env <span class="token operator" >===</span> <span class="token string" >'production'</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >return</span> <span class="token function" >merge</span><span class="token punctuation" >(</span><span class="token punctuation" >[</span>
      common<span class="token punctuation" >,</span>
<div class="leanpub-insert">
      parts<span class="token punctuation" >.</span><span class="token function" >loadJavaScript</span><span class="token punctuation" >(</span>PATHS<span class="token punctuation" >.</span>app<span class="token punctuation" >)</span><span class="token punctuation" >,</span>
</div>
      parts<span class="token punctuation" >.</span><span class="token function" >extractBundles</span><span class="token punctuation" >(</span><span class="token punctuation" >[</span>
        <span class="token punctuation" >{</span>
          name<span class="token punctuation" >:</span> <span class="token string" >'vendor'</span><span class="token punctuation" >,</span>
          entries<span class="token punctuation" >:</span> <span class="token punctuation" >[</span><span class="token string" >'react'</span><span class="token punctuation" >]</span><span class="token punctuation" >,</span>
        <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
      <span class="token punctuation" >]</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
      <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
    <span class="token punctuation" >]</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>

  <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
<span class="token punctuation" >}</span><span class="token punctuation" >;</span>
</code></pre>
<p>Even though we have Babel installed and set up, we are still missing one bit: Babel configuration. I prefer to handle it using a dotfile known as <em>.babelrc</em> as other tooling can pick it up as well.</p>
<blockquote class="warning"><i class="icon-attention"></i>There are times when caching Babel compilation can surprise you. This can happen particularly if your dependencies change in a way that <em>babel-loader</em> default caching mechanism doesn&#39;t notice. Override <code>cacheIdentifier</code> with a string that has been derived based on data that should invalidate the cache for better control. This is where <a href="https://nodejs.org/api/crypto.html">Node.js crypto API</a> and especially its MD5 related functions can come in handy.</blockquote><blockquote class="warning"><i class="icon-attention"></i>If you try to import files <strong>outside</strong> of your configuration root directory and then process them through <em>babel-loader</em>, this will fail! It is <a href="https://github.com/babel/babel-loader/issues/313">a known issue</a> and there are workarounds including maintaining <em>.babelrc</em> at higher level in the project and resolving against Babel presets through <code>require.resolve</code> at webpack configuration.</blockquote><h3 class="header"><a class="header-anchor" href="#setting-up-babelrc-" id="setting-up-babelrc-"></a><span class="text">Setting Up <em>.babelrc</em></span><a class="header-anchor-select" href="#setting-up-babelrc-">#</a></h3>
<p>At a minimum you will need a package known as <a href="https://www.npmjs.com/package/babel-preset-es2015">babel-preset-es2015</a>. Given our project uses dynamic <code>import</code>s and the feature isn&#39;t in the standard yet, we need a specific plugin known as <a href="https://www.npmjs.com/package/babel-plugin-syntax-dynamic-import">babel-plugin-syntax-dynamic-import</a> for that. Install them:</p>
<pre><code class="lang-bash">npm i babel-plugin-syntax-dynamic-import babel-preset-es2015 --save-dev
</code></pre>
<p>To make Babel aware of them, we need to write a <em>.babelrc</em>. Given webpack supports ES6 modules out of the box, we can tell Babel to skip processing them:</p>
<p><strong>.babelrc</strong></p>
<pre><code class="lang-json"><span class="token punctuation" >{</span>
  <span class="token property" >"plugins"</span><span class="token operator" >:</span> <span class="token punctuation" >[</span><span class="token string" >"syntax-dynamic-import"</span><span class="token punctuation" >]</span><span class="token punctuation" >,</span>
  <span class="token property" >"presets"</span><span class="token operator" >:</span> <span class="token punctuation" >[</span>
    <span class="token punctuation" >[</span>
      <span class="token string" >"es2015"</span><span class="token punctuation" >,</span>
      <span class="token punctuation" >{</span>
        <span class="token property" >"modules"</span><span class="token operator" >:</span> <span class="token boolean" >false</span>
      <span class="token punctuation" >}</span>
    <span class="token punctuation" >]</span>
  <span class="token punctuation" >]</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>If you execute <code>npm run build</code> now and examine <em>app.js</em>, you should see something a little different:</p>
<pre><code class="lang-javascript"><span class="token function" >webpackJsonp</span><span class="token punctuation" >(</span><span class="token punctuation" >[</span><span class="token number" >1</span><span class="token punctuation" >]</span><span class="token punctuation" >,</span><span class="token punctuation" >{</span>

<span class="token comment" spellcheck="true">/***/</span> <span class="token number" >19</span><span class="token punctuation" >:</span>
<span class="token comment" spellcheck="true">/***/</span> <span class="token keyword" >function</span><span class="token punctuation" >(</span>module<span class="token punctuation" >,</span> exports<span class="token punctuation" >,</span> __webpack_require__<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>

<span class="token string" >"use strict"</span><span class="token punctuation" >;</span>
<span class="token comment" spellcheck="true">/* harmony default export */</span> exports<span class="token punctuation" >[</span><span class="token string" >"a"</span><span class="token punctuation" >]</span> <span class="token operator" >=</span> <span class="token keyword" >function</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token keyword" >var</span> element <span class="token operator" >=</span> document<span class="token punctuation" >.</span><span class="token function" >createElement</span><span class="token punctuation" >(</span><span class="token string" >'h1'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

  element<span class="token punctuation" >.</span>className <span class="token operator" >=</span> <span class="token string" >'pure-button'</span><span class="token punctuation" >;</span>
  element<span class="token punctuation" >.</span>innerHTML <span class="token operator" >=</span> <span class="token string" >'Hello world'</span><span class="token punctuation" >;</span>
  element<span class="token punctuation" >.</span>onclick <span class="token operator" >=</span> <span class="token keyword" >function</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    __webpack_require__<span class="token punctuation" >.</span>e<span class="token comment" spellcheck="true">/* import() */</span><span class="token punctuation" >(</span><span class="token number" >0</span><span class="token punctuation" >)</span><span class="token punctuation" >.</span><span class="token function" >then</span><span class="token punctuation" >(</span>__webpack_require__<span class="token punctuation" >.</span><span class="token function" >bind</span><span class="token punctuation" >(</span><span class="token keyword" >null</span><span class="token punctuation" >,</span> <span class="token number" >36</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span><span class="token punctuation" >.</span><span class="token function" >then</span><span class="token punctuation" >(</span><span class="token keyword" >function</span> <span class="token punctuation" >(</span>lazy<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
      element<span class="token punctuation" >.</span>textContent <span class="token operator" >=</span> lazy<span class="token punctuation" >.</span><span class="token keyword" >default</span><span class="token punctuation" >;</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >.</span><span class="token keyword" >catch</span><span class="token punctuation" >(</span><span class="token keyword" >function</span> <span class="token punctuation" >(</span>err<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
      console<span class="token punctuation" >.</span><span class="token function" >error</span><span class="token punctuation" >(</span>err<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>

  <span class="token keyword" >return</span> element<span class="token punctuation" >;</span>
<span class="token punctuation" >}</span><span class="token punctuation" >;</span>

<span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
</code></pre>
<p>Note especially how the function was transformed. This code should work in older browsers now. It would be also possible to push it through UglifyJS without any errors due to parsing.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>There are other possible <a href="https://babeljs.io/docs/usage/options/">.babelrc options</a> beyond the ones covered here.</blockquote><blockquote class="tip"><i class="icon-attention-circled"></i>Just like ESLint, Babel supports <a href="https://www.npmjs.com/package/json5">JSON5</a> as its configuration format. This means you can include comments in your source, use single quoted strings, and so on.</blockquote><blockquote class="warning"><i class="icon-attention"></i>Sometimes you might want to use experimental features. Although you can find a lot of them within so called stage presets, I recommend enabling them one by one and even organizing them to a preset of their own unless you are working on a throwaway project. If you expect your project to live a long time, it&#39;s better to document the features you are using well.</blockquote><h2 class="header"><a class="header-anchor" href="#polyfilling-features" id="polyfilling-features"></a><span class="text">Polyfilling Features</span><a class="header-anchor-select" href="#polyfilling-features">#</a></h2>
<p>Given it&#39;s not always enough to transform ES6 code to older format and expect it to work, polyfilling may be needed. The simplest way to solve this problem is to include <a href="https://babeljs.io/docs/usage/polyfill/">babel-polyfill</a> to your project. A simple way to achieve that in webpack is to either include it to an entry (<code>app: [&#39;babel-polyfill&#39;, PATHS.app]</code>) or <code>import &#39;babel-polyfill&#39;</code> from code to get it bundled.</p>
<p>Especially in bundle size sensitive environments <em>babel-polyfill</em> might not be the best option. If you know well which environment (browser versions, Node.js) you support, <a href="https://www.npmjs.com/package/babel-preset-env">babel-preset-env</a> provides a more granular way to achieve the same result with smaller size.</p>
<p>It is important to note that <em>babel-polyfill</em> pollutes the global scope with objects like <code>Promise</code>. Given this can be problematic for library authors, there&#39;s an option known as <a href="https://babeljs.io/docs/plugins/transform-runtime/">transform-runtime</a>. It can be enabled as a Babel plugin and it will avoid the problem of globals by rewriting the code in such way that they won&#39;t be needed.</p>
<h2 class="header"><a class="header-anchor" href="#useful-babel-presets-and-plugins" id="useful-babel-presets-and-plugins"></a><span class="text">Useful Babel Presets and Plugins</span><a class="header-anchor-select" href="#useful-babel-presets-and-plugins">#</a></h2>
<p>Perhaps the greatest thing about Babel is that it&#39;s possible to extend with presets and  plugins. I&#39;ve listed a few interesting ones below:</p>
<ul>
<li><a href="https://www.npmjs.org/package/babel-preset-es2015">babel-preset-es2015</a> includes ES6/ES2015 features.</li>
<li><a href="https://www.npmjs.org/package/babel-preset-es2016">babel-preset-es2016</a> includes <strong>only</strong> ES7/ES2016 features. Remember to include the previous preset as well if you want both!</li>
<li><a href="https://www.npmjs.com/package/babel-plugin-import-asserts">babel-plugin-import-asserts</a> asserts that your imports have been defined. This is useful outside of webpack as it can lead to less cryptic errors to debug.</li>
<li><a href="https://www.npmjs.com/package/babel-plugin-log-deprecated">babel-plugin-log-deprecated</a> adds <code>console.warn</code> to functions that have <code>@deprecate</code> annotation in their comment.</li>
<li><a href="https://www.npmjs.com/package/babel-plugin-annotate-console-log">babel-plugin-annotate-console-log</a> annotates <code>console.log</code> calls with information about invocation context so it&#39;s easier to see where they logged.</li>
<li><a href="https://www.npmjs.com/package/babel-plugin-webpack-loaders">babel-plugin-webpack-loaders</a> allows you to use many webpack loaders through Babel.</li>
</ul>
<blockquote class="tip"><i class="icon-attention-circled"></i>It is possible to connect Babel with Node.js through <a href="https://www.npmjs.com/package/babel-register">babel-register</a> or <a href="https://www.npmjs.com/package/babel-cli">babel-cli</a>. These packages can be handy if you want to execute your code through Babel without using webpack.</blockquote><h2 class="header"><a class="header-anchor" href="#setting-up-typescript" id="setting-up-typescript"></a><span class="text">Setting Up TypeScript</span><a class="header-anchor-select" href="#setting-up-typescript">#</a></h2>
<p>Microsoft&#39;s <a href="http://www.typescriptlang.org/">TypeScript</a> is a compiled language that follows a similar setup as Babel. The neat thing is that in addition to JavaScript, it can emit type definitions. A good editor can pick those up and provide enhanced editing experience. Stronger typing is useful for development as it becomes easier to state your type contracts.</p>
<p>Compared to Facebook&#39;s type checker Flow, TypeScript is a more established option. As a result, you will find more premade type definitions for it, and overall, the quality of support should be better.</p>
<p>You can use TypeScript with webpack using the following loaders:</p>
<ul>
<li><a href="https://www.npmjs.com/package/ts-loader">ts-loader</a></li>
<li><a href="https://www.npmjs.com/package/awesome-typescript-loader">awesome-typescript-loader</a></li>
<li><a href="https://www.npmjs.com/package/light-ts-loader">light-ts-loader</a></li>
</ul>
<blockquote class="tip"><i class="icon-attention-circled"></i>There&#39;s a <a href="https://www.npmjs.com/package/typescript-eslint-parser">TypeScript parser for ESLint</a>. It&#39;s also possible to lint it through <a href="https://www.npmjs.com/package/tslint">tslint</a>.</blockquote><h2 class="header"><a class="header-anchor" href="#setting-up-flow" id="setting-up-flow"></a><span class="text">Setting Up Flow</span><a class="header-anchor-select" href="#setting-up-flow">#</a></h2>
<p><a href="http://flowtype.org/">Flow</a> performs static analysis based on your code and its type annotations. This means you will install it as a separate tool. You will then run it against your code. There&#39;s a webpack plugin known as <a href="https://www.npmjs.com/package/flow-status-webpack-plugin">flow-status-webpack-plugin</a> that allows you to run it through webpack during development.</p>
<p>If you use React, the React specific Babel preset does most of the work through <a href="https://www.npmjs.com/package/babel-plugin-syntax-flow">babel-plugin-syntax-flow</a>. It is able to strip Flow annotations and convert your code into a format that is possible to transpile further.</p>
<p>There&#39;s also a Babel plugin known as <a href="https://www.npmjs.com/package/babel-plugin-typecheck">babel-plugin-typecheck</a> that allows you to perform runtime checks based on your Flow annotations. Even though useful, Flow static checker is able to catch more errors. Runtime checks are still cool, though, and worth enabling if you are using Flow.</p>
<h2 class="header"><a class="header-anchor" href="#conclusion" id="conclusion"></a><span class="text">Conclusion</span><a class="header-anchor-select" href="#conclusion">#</a></h2>
<p>Babel has become an indispensable tool for many developers given it bridges the standard with older browsers. Even if you targeted modern browsers, transforming through Babel may be a necessity if you use UglifyJS.</p>
</div><div class="social-links"><blockquote class="tip">If you enjoyed this chapter, consider subscribing to the mailing list below or following <a href="https://twitter.com/survivejs">@survivejs</a> for occasional updates. There is also <a href="/atom.xml">RSS</a> available for old beards (no pun intended).</blockquote><h2 class="subscribe-header">Subscribe to the mailing list</h2><form action="//jster.us7.list-manage.com/subscribe/post?u=ed40c0084a0c5ba31b3365d65&amp;id=b853b8e786" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate social-form" target="_blank" novalidate=""><div id="mc_embed_signup_scroll"><div class="mc-field-group social-input-container"><input type="email" placeholder="Email" value="" name="EMAIL" class="required email" id="mce-EMAIL"/></div><div style="display:none;position:absolute;left:-5000px;"><input type="text" name="b_ed40c0084a0c5ba31b3365d65_b853b8e786" tabindex="-1" value=""/></div><div class="social-subscribe-container"><input type="submit" class="btn button social-subscribe" style="margin-top:1em;margin-bottom:1em;line-height:2em;" value="Subscribe" name="subscribe" id="mc-embedded-subscribe"/></div></div></form></div><div class="new-prevnext"><div class="new-prevnext__prev"><div class="new-prevnext__bg" style="background-image:url(/assets/img/chapters/nuts.jpg);"></div><span class="new-prevnext__info">Previous chapter</span><a class="new-prevnext__link" href="/webpack/building-with-webpack/code-splitting">Code Splitting</a></div><div class="new-prevnext__next"><div class="new-prevnext__bg" style="background-image:url(/assets/img/chapters/cleaning.jpg);"></div><span class="new-prevnext__info">Next chapter</span><a class="new-prevnext__link" href="/webpack/building-with-webpack/cleaning-build">Cleaning the Build</a></div></div><blockquote class="tip"><p>This book is <a href="https://leanpub.com/survivejs-webpack">available through Leanpub</a>. By purchasing the book you support the development of further content. A part of profit (~30%) goes to Tobias Koppers, the author of Webpack.</p></blockquote><div id="disqus_thread"></div></div></div><div><a class="next-page" title="Cleaning the Build" href="/webpack/building-with-webpack/cleaning-build"><i class="icon-right-open"></i></a><a class="previous-page" title="Code Splitting" href="/webpack/building-with-webpack/code-splitting"><i class="icon-left-open"></i></a></div><script type="text/javascript">var disqus_shortname = 'survivejs';(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script></div><div class="nav__wrapper"><input type="checkbox" class="nav__toggle" id="nav__toggle"/><label class="nav__toggle-label" for="nav__toggle"></label><nav class="nav"><div class="nav__link"><a class="" href="/">Home</a></div><div class="nav__link"><a class="" href="/blog">Read the blog</a></div><div class="nav__link"><a class="" href="https://leanpub.com/survivejs-webpack">Buy the ebook</a></div><div class="nav__link"><a class="" href=""></a></div><div class="nav__link"><a class="" href="https://twitter.com/survivejs">@survivejs</a></div></nav></div><a href="https://github.com/survivejs/webpack" class="github-corner"><svg width="80" height="80" viewBox="0 0 250 250" style="position:absolute;top:0;fill:#000;right:0;"><path class="octo-banner" d="M0 0l115 115h15l12 27 108 108V0z" fill="#fff"></path><path class="octo-arm" d="M128 109c-15-9-9-19-9-19 3-7 2-11 2-11-1-7 3-2 3-2 4 5 2 11 2 11-3 10 5 15 9 16" style="-webkit-transform-origin:130px 106px;transform-origin:130px 106px;"></path><path class="octo-body" d="M115 115s4 2 5 0l14-14c3-2 6-3 8-3-8-11-15-24 2-41 5-5 10-7 16-7 1-2 3-7 12-11 0 0 5 3 7 16 4 2 8 5 12 9s7 8 9 12c14 3 17 7 17 7-4 8-9 11-11 11 0 6-2 11-7 16-16 16-30 10-41 2 0 3-1 7-5 11l-12 11c-1 1 1 5 1 5z"></path></svg></a><footer><div class="footer-wrapper"><div class="footer-content-wrapper"><div class="footer-social"><h3>Social</h3><ul><li><a href="https://twitter.com/survivejs" target="_blank">@survivejs</a></li><li><a href="http://eepurl.com/bth1v5" target="_blank">Mailing List</a></li><li><a href="https://gitter.im/survivejs" target="_blank">Gitter Chat</a></li><li><a href="https://github.com/survivejs" target="_blank">GitHub</a></li><li><a href="/atom.xml" target="_blank">Blog RSS</a></li><li><a href="http://goo.gl/forms/OWdGIOdHm9" target="_blank">Contact</a></li><li><a href="https://github.com/survivejs/ama/issues" target="_blank">Ask Me Anything</a></li></ul></div><div class="footer-blog"><h3>From the Blog</h3><ul class="blog-teasers"><li><a class="blog-teaser" href="/blog/survivejs-webpack-160">SurviveJS - Webpack - v1.6.0</a></li><li><a class="blog-teaser" href="/blog/isomorphic-webpack-interview">isomorphic-webpack - Universal module consumption using webpack - Interview with Gajus Kuizinas</a></li><li><a class="blog-teaser" href="/blog/survivejs-webpack-150">SurviveJS - Webpack - v1.5.0</a></li><li><a class="blog-teaser" href="/blog/styletron-interview">Styletron - Universal, high-performance JavaScript styles - Interview with Ryan Tsao</a></li><li><a class="blog-teaser" href="/blog/survivejs-webpack-142">SurviveJS - Webpack - v1.4.2</a></li><li><a class="blog-teaser" href="/blog/inferno-interview">Inferno - Blazing fast, React-like UI library - Interview with Dominic Gannaway</a></li><li><a class="blog-teaser" href="/blog/svelte-interview">Svelte - The magical disappearing UI framework - Interview with Rich Harris</a></li><li><a class="blog-teaser" href="/blog/webpack-merge-interview">webpack-merge - Taming Webpack Configuration - Interview with Juho VepsÃ¤lÃ¤inen</a></li><li><a class="blog-teaser" href="/blog/starratio-interview">StarRatio - Compare JavaScript Projects - Interview with Dmitry Zaets</a></li><li><a class="blog-teaser" href="/blog/redom-interview">RE:DOM - Tiny but Super Fast DOM Library - Interview with Juha Lindstedt</a></li></ul></div></div></div></footer><div><div class="gitter-open-chat-button">Need help?</div><script type="text/javascript">
            ((window.gitter = {}).chat = {}).options = {
              showChatByDefault: false,
              activationElement: '.gitter-open-chat-button',
              room: 'survivejs/webpack'
            };
          </script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="" defer=""></script></div><div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript">
            docsearch({
              apiKey: '1182e3806d62e921613b8dc9c7a22ef3',
              indexName: 'survivejs_webpack',
              inputSelector: '#search',
              debug: false
            });
          </script></div></main></body></html>